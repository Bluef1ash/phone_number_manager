<?xml version="1.0" encoding="UTF-8" ?> 
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="la.isx.phone_number_manager.main.dao.UserRolePrivilegesDao">
	<resultMap type="UserRolePrivilege" id="UserRolePrivilegeResultMap">
		<id property="roleId" column="role_id" />
		<id property="privilegeId" column="privilege_id" />
	</resultMap>
	<insert id="insertObject" parameterType="UserRolePrivilege">
		INSERT INTO `pm_roles_privileges`(`role_id`, `privilege_id`) VALUES(#{roleId,jdbcType=INTEGER}, #{privilegeId,jdbcType=INTEGER})
	</insert>
	<insert id="insertUserRolePrivileges" parameterType="java.util.List">
		INSERT INTO `pm_roles_privileges`(`role_id`, `privilege_id`) VALUES
		<foreach collection="list" item="privilege" separator=",">
			(#{privilege.roleId,jdbcType=INTEGER}, #{privilege.privilegeId,jdbcType=INTEGER})
		</foreach>
	</insert>
	<delete id="deleteUserRolePrivilegeByUserRolePrivilege" parameterType="UserRolePrivilege">
		DELETE FROM `pm_roles_privileges`
		<where>
			<if test="roleId != null">
				`role_id` =  #{roleId,jdbcType=INTEGER}
			</if>
			<if test="privilegeId != null">
				AND `privilege_id` = #{privilegeId,jdbcType=INTEGER}
			</if>
		</where>
	</delete>
    <update id="updateObject" parameterType="UserRolePrivilege">
        UPDATE `pm_roles_privileges`
        <set>
			<if test="roleId != null">
				`role_id` = #{roleId,jdbcType=INTEGER}
			</if>
			<if test="privilegeId != null">
				, `privilege_id` = #{privilegeId,jdbcType=INTEGER}
			</if>
		</set>
		<where>
			<if test="roleId != null">
				`role_id` =  #{roleId,jdbcType=INTEGER}
			</if>
			<if test="privilegeId != null">
				AND `privilege_id` = #{privilegeId,jdbcType=INTEGER}
			</if>
		</where>
    </update>
</mapper>