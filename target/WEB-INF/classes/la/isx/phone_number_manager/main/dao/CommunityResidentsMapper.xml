<?xml version="1.0" encoding="UTF-8" ?> 
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="la.isx.phone_number_manager.main.dao">
	<resultMap type="CommunityResidents" id="communityResidentsResultMap">
		<id property="communityResidentsId" column="community_residents_id" />
		<result property="name" column="name" />
		<result property="address" column="address" />
		<result property="phone" column="phone" />
		<result property="subcontractor" column="subcontractor" />
		<result property="editTime" column="editTime" />
	</resultMap>
	<!-- id和命名空间用来定位SQL语句，parameterType表示参数的类型，resultMap返回类型 -->
	<insert id="insertCommunityResidents" parameterType="CommunityResidents">
		INSERT INTO  (`name`, `address`, `phone`, `subcontractor`, `editTime`) VALUES (#{name,jdbcType=VARCHAR}, #{address,jdbcType=VARCHAR}, #{phone,jdbcType=VARCHAR}, #{subcontractor,jdbcType=VARCHAR}, #{editTime,jdbcType=TIMESTAMP});
	</insert>
	<delete id="deleteCommunityResidentsById" parameterType="integer">
		DELETE FROM `pm_community_residents` WHERE `community_residents_id` =  #{communityResidentsId,jdbcType=INTEGER};
	</delete>
    <delete id="deleteCommunityResidentsByName" parameterType="string">
        DELETE FROM `pm_community_residents` WHERE `name` =  #{name,jdbcType=VARCHAR};
    </delete>
    <update id="updateCommunityResidents" parameterType="CommunityResidents">
        UPDATE `pm_community_residents`
        <set>
			<if test="communityResidentsId != null">
				`community_residents_id` = #{communityResidentsId,jdbcType=INTEGER}
			</if>
			<if test="name != null">
				`name` =  #{name,jdbcType=VARCHAR}
			</if>
			<if test="address != null">
				`address` = #{address,jdbcType=VARCHAR}
			</if>
			<if test="phone != null">
				`phone` = #{phone,jdbcType=VARCHAR}
			</if>
			<if test="subcontractor != null">
				`subcontractor` = #{subcontractor,jdbcType=VARCHAR}
			</if>
			<if test="editTime != null">
			 	`editTime` = #{editTime,jdbcType=TIMESTAMP}
			</if>
		</set>
		WHERE `community_residents_id` = #{communityResidentsId,jdbcType=INTEGER};
    </update>
	<select id="selectCommunityResidentsAll" resultMap="communityResidentsResultMap">
		SELECT `community_residents_id`, `name`, `address`, `phone`, `subcontractor`, `editTime` FROM `pm_community_residents`;
	</select>
</mapper>